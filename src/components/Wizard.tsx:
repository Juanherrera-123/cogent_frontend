import React, { useState } from "react";
import Consentimiento from "./Consentimiento";
import SelectorForma from "./SelectorForma";
import FichaDatosGenerales from "./FichaDatosGenerales";
import Encuesta from "./Encuesta";
import Confirmacion from "./Confirmacion";

export default function Wizard() {
  // 0 = Consentimiento, 1 = Selector, 2 = Ficha, 3 = Encuesta, 4 = Confirmaci√≥n
  const [paso, setPaso] = useState(0);
  const [tipoForma, setTipoForma] = useState<"A" | "B" | null>(null);
  const [datosGenerales, setDatosGenerales] = useState({});
  const [respuestas, setRespuestas] = useState({});

  return (
    <div className="min-h-screen flex flex-col items-center justify-center bg-white">
      {paso === 0 && (
        <Consentimiento onAceptar={() => setPaso(1)} />
      )}
      {paso === 1 && (
        <SelectorForma onSeleccion={(tipo) => { setTipoForma(tipo); setPaso(2); }} />
      )}
      {paso === 2 && (
        <FichaDatosGenerales
          onGuardar={(datos) => { setDatosGenerales(datos); setPaso(3); }}
        />
      )}
      {paso === 3 && tipoForma && (
        <Encuesta
          tipo={tipoForma}
          onFinish={(respuestasFinales) => { setRespuestas(respuestasFinales); setPaso(4); }}
        />
      )}
      {paso === 4 && (
        <Confirmacion
          datos={datosGenerales}
          respuestas={respuestas}
        />
      )}
    </div>
  );
}
